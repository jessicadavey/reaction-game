<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap" rel="stylesheet">
	<title>Reaction Game</title>


	<style type="text/css">
		body {

			font-family: 'Varela Round', sans-serif;

		}

		#object {

			position: relative;

		}

		#time {

			font-weight: bold;

		}
	</style>

</head>

<body>

	<h1>Test Your Reactions</h1>

	<p id="info">Click on the boxes and circles as quickly as you can!</p>

	<p id="time">Your time: <span id="durationSpan"></span><br>
		Total time: <span id="totalTimeSpan"></span><br>
		Number of tries: <span id="triesSpan"></span></p>

	<button id="start">Start!</button>

	<div id="object"></div>


	<script>
		function createObject() {

			startTime = new Date();

			const object = document.getElementById("object")
			const durationSpan = document.getElementById("durationSpan");
			const totalTimeSpan = document.getElementById("totalTime");
			const triesSpan = document.getElementById("triesSpan");


			let circleOrSquare = Math.floor(Math.random() * 2);
			object.style.borderRadius = `${circleOrSquare * 50}%`;

			let randomSize = (Math.random() * 200) + 20;
			object.style.width = `${randomSize}px`;
			object.style.height = `${randomSize}px`;

			let randomColor = Math.floor(Math.random() * 256);
			object.style.backgroundColor = `hsl(${randomColor}, 100%, 50%)`;

			function randomPositionLeft() {
				return Math.floor(Math.random() * (window.innerWidth -
					randomSize
				)); // To keep the shape from appearing off the page.  -randomSize accounts for the width of the object itself
			}

			function randomPositionTop() {
				return Math.floor(Math.random() * (window.innerHeight - 170 -
					randomSize)); // The -170 accounts for the height of the titles

			}

			object.style.left = `${randomPositionLeft()}px`
			object.style.top = `${randomPositionTop()}px`
			object.style.display = "block";

		}

		const startButton = document.getElementById("start");
		let startTime = new Date();
		let totalTime = 0;
		let tries = 0;

		startButton.onclick = () => {
			createObject();
			startButton.style.display = "none";
		}

		object.onclick = function () {
			object.style.display = "none";

			let duration = (new Date() - startTime) / 1000;
			durationSpan.innerHTML = duration + "s";

			totalTime += duration;
			totalTimeSpan.innerHTML = totalTime + "s";

			tries++;
			triesSpan.innerHTML = tries;

			const randomTime = Math.random() * 2500
			const timeOut = setTimeout(createObject, randomTime);

			if (tries >= 10) {
				clearTimeout(timeOut);
				startButton.style.display = "block";
			}

		}
	</script>


</body>

</html>